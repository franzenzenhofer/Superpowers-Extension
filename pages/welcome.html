<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="script-src 'self'">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to Superpowers</title>
  <link rel="stylesheet" href="../styles/superpowers.css">
  <style>
    /* Welcome page specific overrides */
    main {
      max-width: 860px;
      margin: 3rem auto;  /* increased from 2rem */
      background: var(--panel-bg);
      padding: 2rem 2.5rem;
      border-radius: var(--border-radius);
      border: 1px solid var(--border-strong);
      flex: 1;
    }

    h2 {
      margin-top: 3.5rem;  /* increased spacing before headlines */
      margin-bottom: 1.5rem;  /* increased spacing after headlines */
    }

    h2:first-of-type {
      margin-top: 2rem;  /* keep first heading closer to content */
    }

    .mini-box {
      background: var(--bg-primary);
      border: 2px dashed var(--border-subtle);
      border-radius: var(--border-radius);
      padding: 0.6em 1em;
      margin: 1.5em 0;  /* increased from 1em */
      overflow-x: auto;
    }

    p {
      margin-bottom: 1.2rem;  /* increased paragraph spacing */
      line-height: 1.6;  /* improved line height for better readability */
    }

    ul, ol {
      margin: 1.5rem 0;  /* increased list spacing */
      padding-left: 2rem;  /* increased list indent */
    }

    li {
      margin-bottom: 0.8rem;  /* increased spacing between list items */
    }

    .api-key-notice {
      background: var(--bg-elevated);
      border-left: 4px solid var(--super-yellow);
      padding: 1.5rem;  /* increased internal padding */
      margin: 2.5rem 0;  /* increased notice spacing */
      border-radius: var(--border-radius);
    }

    .highlight {
      background: var(--bg-elevated);
      border-left: 4px solid var(--super-yellow);
      padding: 1.5rem;  /* increased internal padding */
      margin: 2.5rem 0;  /* increased highlight box spacing */
      border-radius: var(--border-radius);
    }

    header {
      background: var(--bg-elevated);
      padding: var(--space-4);
      text-align: center;
    }

    header h1 {
      color: var(--super-yellow);
      margin: 0;
      font-size: 2rem;
      text-shadow: var(--border-glow);
    }

    .button-bar {
      margin: 2.5rem 0;  /* increased button bar spacing */
      display: flex;
      gap: var(--space-3);
      flex-wrap: wrap;
    }

    footer {
      margin-top: 3rem;  /* increased footer spacing */
      padding: 1rem;  /* increased footer padding */
    }

    /* Enhanced link styles */
    a {
      color: var(--super-yellow);
      text-decoration: none;
      position: relative;
      transition: all 0.2s ease;
      border-bottom: 1px dotted var(--super-yellow);
      padding-bottom: 1px;
    }

    a:hover {
      color: var(--white-pure);
      border-bottom: 1px solid var(--white-pure);
    }

    a:active {
      color: var(--super-yellow-light);
      border-bottom-color: var(--super-yellow-light);
      transform: translateY(1px);
    }

    a:visited {
      color: var(--super-blue-300);
      border-bottom-color: var(--super-blue-300);
    }

    a:visited:hover {
      color: var(--super-yellow);
      border-bottom-color: var(--super-yellow);
    }

    /* Special styling for code links */
    code a {
      border-bottom: none;
      padding: 0.2em 0.4em;
      background: var(--super-blue-700);
      border-radius: var(--border-radius);
    }

    code a:hover {
      background: var(--super-blue-500);
    }

    /* Exception for footer links */
    footer a {
      border-bottom: none;
      color: var(--text-muted);
    }

    footer a:hover {
      color: var(--super-yellow);
    }

    /* Enhanced button styles */
    .button-bar button,
    .super-action-button {
      background: var(--super-yellow);
      color: var (--super-blue-900);
      border: none;
      padding: var(--space-3) var(--space-4);
      border-radius: var (--border-radius);
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: all var(--transition-fast);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      min-width: 200px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-2);
    }

    .button-bar button:hover,
    .super-action-button:hover {
      background: var(--super-yellow-light);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--super-yellow-glow);
    }

    /* Fix for button-style links */
    .super-action-button[href] {
      text-decoration: none;
      color: var(--super-blue-900) !important;  /* Override the yellow link color */
      border-bottom: none !important;  /* Remove the dotted underline */
    }

    .super-action-button[href]:hover {
      color: var(--super-blue-900) !important;  /* Keep text dark on hover */
      border-bottom: none !important;
    }

    .super-action-button[href]:visited {
      color: var(--super-blue-900) !important;  /* Keep text dark for visited state */
      border-bottom: none !important;
    }

    /* Enhanced installation instructions */
    .install-steps {
      background: var(--bg-elevated);
      padding: 2rem;
      border-radius: var(--border-radius);
      margin: 2rem 0;
      font-size: 1.2rem;
      line-height: 1.8;
    }

    .install-steps h3 {
      color: var(--super-yellow);
      font-size: 1.4rem;
      margin-bottom: 1.5rem;
    }

    .install-steps ol {
      margin: 0;
      padding-left: 2.5rem;
    }

    .install-steps li {
      margin-bottom: 1.2rem;
      padding-left: 0.5rem;
    }

    .install-steps code {
      background: var(--bg-primary);
      padding: 0.3em 0.5em;
      border-radius: 4px;
      font-size: 1.1rem;
    }

    .install-steps .button-bar {
      margin-top: 2rem;
    }

    .chrome-url-box {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      background: var(--bg-primary);
      padding: var(--space-3);
      border-radius: var(--border-radius);
      margin: 0.8rem 0;
    }

    .chrome-url-box code {
      font-size: 1.1rem;
      color: var(--super-yellow);
    }

    .hint-box {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 0.3rem;
      font-style: italic;
    }
  </style>
</head>
<body>

<header>
  <h1>Welcome to <em>Superpowers</em>!</h1>
</header>

<main>
  <!-- Add new editor button -->
  <div class="button-bar" style="justify-content: center; margin: 0 0 2rem 0;">
    <a href="https://editor.franzai.com/" 
     class="super-action-button" style="font-size: 1.2em; padding: 1rem 2rem;">
      üöÄ Open Superpowers Editor
    </a>
  </div>

  <p>
    <strong>Superpowers</strong> is a robust Chrome extension that grants your local HTML pages
    extraordinary new capabilities, including cross-domain fetches, environment variables,
    in-page AI calls, screenshot captures, and more ‚Äî all from your usual web page environment!
  </p>

  <div class="button-bar">
    <button id="quickOpenSidePanel" class="super-action-button">
      üéõÔ∏è Open Side Panel
    </button>
    <button id="quickOpenCredsManager" class="super-action-button">
      üîë Open Credentials Manager
    </button>
  </div>

  <ul>
    <li><strong>Cross-domain fetches</strong>: no more same-origin headaches when testing local HTML files.</li>
    <li><strong>Environment Variables</strong>: securely store and retrieve API keys or config values.</li>
    <li><strong>AI & GPT-based Tools</strong>: talk to GPT-4o, generate images, or process audio from a local page!</li>
    <li><strong>Google API Auth</strong>: easily add <em>client_secret</em> and <em>token</em> to call Analytics or Search Console.</li>
    <li><strong>Screenshot / DOM extraction</strong>: capture pages, retrieve rendered HTML, and more!</li>
  </ul>

  <div class="api-key-notice">
    <h3>üîë Important: OpenAI API Key</h3>
    <p>
      If you want to use AI features (GPT-4o, DALL¬∑E, etc.), 
      set your <code>OPENAI_API_KEY</code> in the environment variable manager. 
      For help obtaining one, see 
      <a href="https://chatgpt.com/?q=Where%20and%20how%20to%20get%20an%20OPENAI_API_KEY%20-%20Detailed%20Step%20by%20Step%20Instructions&hints=search&ref=ext" target="_blank">OpenAI‚Äôs API Keys</a>.
    </p>
  </div>

  <h2>1) Installing the Extension</h2>
  <div class="install-steps">
    <h3>üì• Installation Steps:</h3>
    <ol>
      <li>
        Clone or download the <code>Superpowers-Extension</code> repository from GitHub
        <div class="button-bar">
          <a href="https://github.com/franzenzenhofer/Superpowers-Extension" target="_blank" class="super-action-button">
            üì¶ Download from GitHub
          </a>
        </div>
      </li>
      <li>
        Open Chrome Extensions page:
        <div class="chrome-url-box">
          <code>chrome://extensions</code>
          <button id="copyExtensionsUrl" class="btn-secondary">
            üìã Copy URL
          </button>
        </div>
        <div class="hint-box">
          (Paste into Chrome's address bar)
        </div>
      </li>
      <li>
        Enable <strong>Developer Mode</strong> in the top right
      </li>
      <li>
        Click <strong>"Load unpacked"</strong> and select the extension folder you downloaded
      </li>
    </ol>
  </div>

  <h2>2) Basic Setup &amp; <code>&lt;meta&gt;</code> Tag</h2>
  <p>
    In any local HTML or web page, add:
  </p>
  <div class="mini-box">
    <code>&lt;meta name="superpowers" content="enabled"&gt;</code>
  </div>
  <p>
    That signals Superpowers to inject <code>window.Superpowers</code> into your page. 
    Then you can do, for example:
  </p>
  <div class="mini-box" style="white-space:pre;">
<code>(async () =&gt; {
  // Wait a short moment for extension injection
  await new Promise(r =&gt; setTimeout(r, 300));

  // 1) environment variables
  const envVars = await Superpowers.getEnvVars();
  console.log("My environment variables:", envVars);

  // 2) cross-domain fetch
  const fetchResp = await Superpowers.fetch("https://example.com/api");
  if (fetchResp.ok) {
    const data = await fetchResp.json();
    console.log("Fetched data:", data);
  }
})();
</code>
  </div>

  <h2>3) Managing Environment Variables</h2>
  <p>
    Open the side panel (click the extension icon or 
    <code>chrome.runtime.sendMessage({ type: "OPEN_SIDEPANEL" })</code>) 
    and add keys like <code>OPENAI_API_KEY</code>. 
    You can also store multiple environment sets if needed. 
    Then do <code>await Superpowers.getEnvVars()</code> in your page to retrieve them.
  </p>

  <h2>4) Credentials Manager (Google Auth, etc.)</h2>
  <p>
    For <strong>Google Analytics</strong> or <strong>Search Console</strong> calls, 
    store your <code>client_secret</code> (OAuth desktop style) and <code>token</code> using 
    the ‚ÄúCredentials Manager.‚Äù It guides you through an OAuth flow to create a token. 
    After that:
  </p>
  <div class="mini-box" style="white-space:pre;">
<code>// Example usage:
await Superpowers.Gsc.listSites();
await Superpowers.Ga.listAccounts();
</code>
  </div>

  <h2>5) AI / GPT Usage</h2>
  <p>
    With <code>OPENAI_API_KEY</code> set, 
    you can call <code>Superpowers.OpenAI</code> methods. 
    For instance:
  </p>
  <div class="mini-box" style="white-space:pre;">
<code>const response = await Superpowers.OpenAI.chatCompletion({
  model: "gpt-4o",
  messages: [{ role: "user", content: "Hello GPT, how are you?" }]
});
console.log("AI Chat result:", response);
</code>
  </div>
  <p>
    You can also generate images (<code>imageGeneration</code>), do embeddings, or use streaming calls. 
  </p>

  <h2>6) Screenshots &amp; Rendered HTML</h2>
  <p>Take snapshots or retrieve final rendered HTML from external pages:</p>
  <div class="mini-box" style="white-space:pre;">
<code>// Full-page screenshot:
const shot = await Superpowers.screenshot({
  url: "https://example.com",
  captureMode: "full",
  format: "png"
});
console.log("Screenshot data URL:", shot);

// Rendered HTML:
const rendered = await Superpowers.Urlget.getRenderedPage("https://example.com", {
  waitForEvent: "load", timeoutMs: 30000
});
console.log("Final HTML length:", rendered.html.length);
</code>
  </div>

  <h2>7) Quick Recap</h2>
  <ol>
    <li>Install extension in dev mode, 
      <code>&lt;meta name="superpowers"&gt;</code> in your HTML.
    </li>
    <li>Use side panel‚Äôs ‚ÄúEnv Manager‚Äù for keys like <code>OPENAI_API_KEY</code>.</li>
    <li>If using Google APIs, store <code>client_secret</code> + <code>token</code> in the credentials manager.</li>
    <li>Enjoy <code>Superpowers</code> calls from your local HTML pages!</li>
  </ol>

  <div class="highlight">
    Need more details or stuck?
    <ul>
      <li>See <strong>README-LLM.md</strong> in your extension folder.</li>
      <li>Check the <em>First Steps Guide</em> or GitHub repo for deeper instructions.</li>
      <li>Ask GPT about ‚ÄúUsing the Superpowers Chrome extension.‚Äù</li>
    </ul>
  </div>

  <h2>Actions &amp; Next Steps</h2>
  <div class="button-bar">
    <button id="openSidePanel" class="super-action-button">
      üéõÔ∏è Open Side Panel
    </button>
    <button id="openCredsManager" class="super-action-button">
      üîë Open Credentials Manager
    </button>
  </div>

  <p>
    <em>That‚Äôs it ‚Äî you now have <strong>Superpowers</strong>!</em> 
    Go forth and build amazing, unstoppable web pages.
  </p>
</main>

<footer>
  <p>Extension version: <strong>4.3</strong> | <em>Elevate your web experience.</em></p>
</footer>

<script src="welcome.js"></script>

</body>
</html>
